<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
    if (!window.console) {
      window.console = {
                   log: function() {}
                 };
    }
</script>
    <title>Sargam Online Parser/Formatter</title>
    <link rel="stylesheet" href="css/application.css" type="text/css" media="all">
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
</head>
<body>
<a href="https://github.com/rothfield/doremi">doremi Project home page on github</a>
<h1>Letter Music Notation Editor</h1>
<h2>Enter music notation as text/letters, render it beautifully in html/css, and generate western staff notation/midi</h2>
<div>
<ul id='controls'>
<li>
<label>Open:</label>
<input type="file" id="file" name="files[]" />
 </li>
<li>
</li>
<li>
<a id="staff_notation_link" href="#staff_notation">Jump to Staff Notation</a> 
</li>
<li>
<a id="load_long_composition" >Load Long sample</a> 
</li>
<li>
<a href="#rendered_sargam">Jump to Rendered Sargam</a> 
</li>
<li>
</li>
<li>
</li>
<li>
<button id="show_parse_tree">Show Parse Tree</button>
</li>
</ul>
</div>
<h2 class="step">Step 1: Enter music notation as letters. You can use ABC(C C# D Eb), Sargam (SrRgGmPdDnN), or Devanagri Sargam(<span class="display_devanagri">सरग़मपधऩस</span>). Place dots above/below notes to indicate octaves. Use (CDEF) to indicate a slur between C and F. Put a blank line between each line of notation. Use dashes as rhythmic placeholders (for example, try C--D--E)</h2>
<textarea id="entry_area" rows="5" cols="90"></textarea>
<div id="parse_tree_div">
                <pre id="parse_tree">
                        Parse Tree goes here
                                </pre>
                        </div>
<div id="warnings_div">
</div>
<a name="rendered_sargam"></a> 
<h2 class="step">Step 2: The music notation is rendered using standard html/css. Note the lower loops are automatically drawn to delimit beats and that upper loops are drawn for slurs. 
</h2>
<h4>Click <button id="run_parser">here</button> to run the parser manually</h4>
<div><label>Rendered Sargam:</label> </div>
<div id="rendered_sargam">
</div>
<br/>
<br/>
<br/>
<br/>
<a name="staff_notation"></a> 
<h2 class="step">Step 3: Click <button id="generate_staff_notation">Generate staff notation and midi file...</button> to render the notation in staff notation using lilypond. This also generates midi, png, and pdf files on the server.
</h2>
<button id="show_lilypond_source">Lilypond source</button>
<button id="show_lilypond_output">Lilypond output</button>
<button id="generate_html_page">Display html in own window</button>
<h2 class="step">Step 4: Save your composition to your computer as a text file by clicking here: 
<a id="download_txt" href="" target="_blank">sargam(right click and do save/as)</a>
</h2>
<pre id='lilypond_source'>
</pre>
<div id='lilypond_output'>
</div>
<h2 class="step">Step 5: Download files generated by lilypond (links open in new window) (Must click the Generate staff notation... button first) 
</h2>
<div>
<a class="generated_by_lilypond" id="download_png" href="" target="_blank">png</a>
<a class="generated_by_lilypond" id="download_pdf" href="" target="_blank">pdf</a>
<a class="generated_by_lilypond" id="download_mid" title="Play midi file" href="" target="_blank">midi</a>
<a class="generated_by_lilypond" id="download_ly" href="" target="_blank">Lilypond</a>
</div>
<div>
<img class="generated_by_lilypond" id="lilypond_png" src="images/none.png"/>
</div>
<br/>
<br/>
<p>Author: John Rothfield - rthfield@sonic.net</p>
<!-- Try using zepto instead of jquery! -->
    <script type="text/javascript" src="js/third_party/zepto.min.js"></script>
    <!--
    <script type="text/javascript" src="js/third_party/jquery.js"></script>
    -->
    <script type="text/javascript" src="js/underscore.logger.js"></script>
    <script type="text/javascript" src="js/third_party/underscore.js"></script>
    <script type="text/javascript" src="js/third_party/fraction.js"></script>
    <script type="text/javascript" src="js/tree_iterators.js"></script>
    <script type="text/javascript" src="js/parser_helper.js"></script>
    <script type="text/javascript" src="js/to_lilypond.js"></script>
    <script type="text/javascript" src="js/doremi_script_parser.js"></script>
    <script type="text/javascript" src="js/dom_fixer.js"></script>
    <script type="text/javascript" src="js/html_renderer.js"></script>
    <script type="text/javascript" src="js/application.js"></script>
<!-- stash css and javascript here when necessary to generate a standalone page.  -->
<script id="css_for_html_doc" type="text/html"></script>
<script id="zepto_for_html_doc" type="text/html"></script>
<script id="dom_fixer_for_html_doc" type="text/html"></script>
<script id="long_sample" type="text/html">
Rag:Bhairavi
Tal:Tintal
Title:Bansuri
Author:Traditional
Source:AAK
Mode: phrygian
Filename: bansuri.sargam
Time: 4/4
Key: d


          
                              i            IV         . 
         3                    +             2        DSnDn
1)|: (Sr | n) S   (gm <Pd)> | P - P  P   | P - D    n     |
           .
      ban-    su-  ri         ba- ja ra-   hi  dhu- na

  0  ~                 3           mgm        +  .     *  *   
| P  d   P    d    |  (Pm   PmnP)    (g m) | (PdnS) -- g  S |
  ma-dhu-ra   kan-     nai-           ya      khe-     la-ta

   2               0     
                   ~
| (d-Pm  g) P  m | r - S :|
   ga-      wa-ta  ho- ri
</script>
</body>
</html>
