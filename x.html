<h1>DoremiScript</h1>

<p><strong>DoremiScript</strong> is a small language for creating <a href="http://en.wikipedia.org/wiki/Letter_notation">letter based musical notation</a>. It currently supports western ABC style notation, <a href="http://http://en.wikipedia.org/wiki/Numbered_musical_notation">Numbered notation</a> using 1234567, <a href="http://en.wikipedia.org/wiki/Swara">Sargam</a> notation using english letters SrRgGmMPdnN as used at the AACM for notating Ragas, and <a href="http://en.wikipedia.org/wiki/Musical_notation#India">Devanagri notation in Bhatkande style</a> using Devanagri letters for the sargam letters. <strong>DoremiScript</strong> lets you write letter music notation using an easy-to-read, easy-to-write plain text format, then nicely formats it using css and html. DoRemiScript can also generate standard western notation via a <a href="http://lilypond.org">Lilypond</a> converter. </p>

<p>Try the <a href="http://ragapedia.com">online version</a></p>

<h2>Sample Input in AACM Sargam Style</h2>

<pre><code>Rag:Bhairavi
Tal:Tintal
Title:Bansuri
Author:Traditional
Source:AAK
Mode: phrygian
Filename: bansuri.sargam
Time: 4/4 
Key: d



                            i            IV  
         3                  +            2          .   
1)|: (Sr | n) S   (gm Pd) | P - P  P   | P - D  &lt;(nDSn)&gt;) |
           .   
      ban-    su-  ri       ba- ja ra-   hi  dhu- na

  0  ~                3            ~       +  .     *  *   
| P  d   P    d    |  (Pm   PmnP) (g m) | (PdnS) -- g  S | 
  ma-dhu-ra   kan-     nai-        ya      khe-     la-ta

   2               0    
                   ~   
| (d-Pm  g) P  m | r - S :|
   ga-      wa-ta  ho- ri
</code></pre>

<h2>Sargam HTML Output</h2>

<p><img src="https://github.com/rothfield/doremi/raw/master/docs/sargam_screenshot.png" alt="Screenshot of Sargam rendered in html" title="Sargam Screenshot" /></p>

<h2>Generated Western Staff Notation</h2>

<p><img src="https://github.com/rothfield/doremi/raw/master/docs/western_notation_example.png" alt="Converted to western notation" title="" /></p>

<ul>
<li>Use a blank line to separate lines of music.</li>
<li>ABC style notation is written as follows C C# Db etc</li>
<li>Numbered notation is written as follows 1234567 corresponding to the diatonic notes of the C scale, with sharps and flats notated as 2b(Db) and 2#(D#), for example.</li>
<li>AACM sargam notation is written as follows SrRgGmMPdDnN for the 12 notes. Sharp and flat notes are also supported as follows: S# R# etc and Pb. This allows proper notation using Sargam of Jazz/Pop/Classical music that uses these notes. For example, in notating the Beatles tune "Yesterday", use P# to indicate the sharpened fifth degree. P# corresponds to G# in the key of C.</li>
<li>Note that the AACM style of Sargam notation uses <em>lowercase</em> characters to indicate the flattened notes.</li>
<li>Devanagri style sargam is written using the devanagri letters सरग़मपधऩस
for the seven notes SRGmPDN. Use an underline underneath the letter to indicate a kommal note (flat). For sharp Ma, write as म' (note the tick symbol) </li>
<li>left and right parens are used to indicate slurs. Slurs can only be made between pitches. For example, use (SRg)- rather than  (Srg-)</li>
<li>Beats are delimited by spaces. If you need more space within the beat(for example, to make room for lyrics), then use angle brackets &lt;> to delimit the beat</li>
<li>Dot (.) and asterisk can be used interchangeably to 
indicate octaves. Place dots underneath for lower octave and above for
upper octaves. Use a colon <strong>:</strong> to indicate upper-upper octave or lower-lower octave</li>
<li>Rhythm: In this style of notation, derived from the AACM style, the dash (<strong>-</strong>) is used as a rhythmic placeholder. For example, this measure <code>| C--Eb--G-   A   A   A |</code> is interpreted as a measure consisting of four beats. The first beat is divided into 8 parts, where the C gets 3/8ths of the beat, Eb gets 3/8ths of a beat and G gets 2/8ths. (Note that 3/8ths of a beat in western 4/4 notation is considered 3/32nds and is written as a dotted 16th. Confused?) The 3 A's are each a single beat. The lilypond generator attempts to support this, but still needs a bit of work.</li>
<li>Underlines are supported for Devanagri to indicate flat notes</li>
<li>Mode,Time, and Key in header are used in generating western notation</li>
<li>Chord symbols are supported</li>
<li>Syllables must be entered directly under a pitch.</li>
<li>For syllables to show up properly in generated western notation, slurs
should be used to indicate the melismas</li>
<li>Use | for single barline, || for double barline, |: and :| for left and right repeats</li>
<li>If need be, you can have multiple upper or lower lines.</li>
<li>Asterisk (*) can be used instead of a . to indicate octave</li>
<li><p>Use the tilde character <strong>~</strong> to indicate an ornament which is displayed as </p>

<h1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    &#x1D19D;&#x1D19D;</h1></li>
<li><p>Supports tala markings +023456 for notating classical North Indian rhythmical cycles such as teental. The <strong>+</strong> indicates (usually) the first beat of the rhythmical cycle. The tala markings indicate the claps(taali) and non-claps(kaali) that delimit the rhythmic cycle.  </p></li>
<li>Generates <a href="http://lilypond.org">lilypond</a> as an interchange format, which can be used to generate western staff notation and midi</li>
<li>Parser is easy to modify and is generated from a PEG grammar using a parsing expression grammar [peg.js])https://github.com/dmajda/pegjs)</li>
<li>DoremiScript grammar is <a href="https://github.com/rothfield/doremi/raw/src/grammars/sargam.peg.js">here</a></li>
<li>Endings are entered as follows: 1.<strong><em>_</em><em></strong> or 2.<strong></em></strong> Current lilypond support for endings is poor.</li>
<li>It is possible to mix ABC, Devanagri, and AACM notations in the same composition, but each line of notation must be in only one style.</li>
<li>Supports ornaments (Sargam only for now). Octaves for ornaments are not supported and the ornament is placed in the column to the RIGHT of the pitch:</li>
<li>Code base is written in coffeescript</li>
<li>(Programmes only:)Command line tools are available via npm:
<ul>
<li>First install <a href="http://npmjs.org">npm</a></li>
<li>Then install the <strong>sargam</strong> package:</li>
<li>npm install sargam</li>
<li>Command line usage: 
<ul>
<li>To generate lilypond:</li>
<li>cat composition.txt | sargam </li>
<li>To parse the composition, returning the parsed json:</li>
<li>cat composition.txt | sargamparse</li>
<li>Run lilypond on composition.txt</li>
<li>cat composition.txt | sargam | lilypond -o composition -</li>
</ul></li>
</ul></li>
<li>This project borrows ideas from <a href="http://en.wikipedia.org/wiki/ABC_notation">ABC musical notation</a>, <a href="http://lilypond.org">lilypond</a>, and <a href="http://en.wikipedia.org/wiki/Markdown">markdown</a>.</li>
<li>Special thanks to George Ruckert, Ali Akbar Khan and the authors of peg.js, lilypond, and coffeescript.</li>
</ul>

<p>Ornament example:
```Title: test</p>

<p>NRSNS
| S```</p>
